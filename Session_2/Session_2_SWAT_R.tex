\documentclass[11pt,]{article}
\usepackage[left=1in,top=1in,right=1in,bottom=1in]{geometry}
\newcommand*{\authorfont}{\fontfamily{phv}\selectfont}
\usepackage[]{mathpazo}


  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}



\usepackage{abstract}
\renewcommand{\abstractname}{}    % clear the title
\renewcommand{\absnamepos}{empty} % originally center

\renewenvironment{abstract}
 {{%
    \setlength{\leftmargin}{0mm}
    \setlength{\rightmargin}{\leftmargin}%
  }%
  \relax}
 {\endlist}

\makeatletter
\def\@maketitle{%
  \newpage
%  \null
%  \vskip 2em%
%  \begin{center}%
  \let \footnote \thanks
    {\fontsize{18}{20}\selectfont\raggedright  \setlength{\parindent}{0pt} \@title \par}%
}
%\fi
\makeatother




\setcounter{secnumdepth}{0}

\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}


\title{Session 2: SWAT simulation, calibration, and sensitivity analysis in R  }



\author{\Large Christoph Schürz\vspace{0.05in} \newline\normalsize\emph{\href{mailto:christoph.schuerz@boku.ac.at}{\nolinkurl{christoph.schuerz@boku.ac.at}}}  }


\date{}

\usepackage{titlesec}

\titleformat*{\section}{\normalsize\bfseries}
\titleformat*{\subsection}{\normalsize\itshape}
\titleformat*{\subsubsection}{\normalsize\itshape}
\titleformat*{\paragraph}{\normalsize\itshape}
\titleformat*{\subparagraph}{\normalsize\itshape}


\usepackage{natbib}
\bibliographystyle{apsr}
\usepackage[strings]{underscore} % protect underscores in most circumstances



\newtheorem{hypothesis}{Hypothesis}
\usepackage{setspace}

\makeatletter
\@ifpackageloaded{hyperref}{}{%
\ifxetex
  \PassOptionsToPackage{hyphens}{url}\usepackage[setpagesize=false, % page size defined by xetex
              unicode=false, % unicode breaks when used with xetex
              xetex]{hyperref}
\else
  \PassOptionsToPackage{hyphens}{url}\usepackage[unicode=true]{hyperref}
\fi
}

\@ifpackageloaded{color}{
    \PassOptionsToPackage{usenames,dvipsnames}{color}
}{%
    \usepackage[usenames,dvipsnames]{color}
}
\makeatother
\hypersetup{breaklinks=true,
            bookmarks=true,
            pdfauthor={Christoph Schürz (\href{mailto:christoph.schuerz@boku.ac.at}{\nolinkurl{christoph.schuerz@boku.ac.at}})},
             pdfkeywords = {},
            pdftitle={Session 2: SWAT simulation, calibration, and sensitivity analysis in R},
            colorlinks=true,
            citecolor=blue,
            urlcolor=blue,
            linkcolor=magenta,
            pdfborder={0 0 0}}
\urlstyle{same}  % don't use monospace font for urls

% set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother



% add tightlist ----------
\providecommand{\tightlist}{%
\setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

\begin{document}

% \pagenumbering{arabic}% resets `page` counter to 1
%
% \maketitle

{% \usefont{T1}{pnc}{m}{n}
\setlength{\parindent}{0pt}
\thispagestyle{plain}
{\fontsize{18}{20}\selectfont\raggedright
\maketitle  % title \par

}

{
   \vskip 13.5pt\relax \normalsize\fontsize{11}{12}
\textbf{\authorfont Christoph Schürz} \hskip 15pt \emph{\small \href{mailto:christoph.schuerz@boku.ac.at}{\nolinkurl{christoph.schuerz@boku.ac.at}}}   

}

}








\begin{abstract}

    \hbox{\vrule height .2pt width 39.14pc}

    \vskip 8.5pt % \small

\noindent The goal of this second session is that you get familiar with the
\texttt{SWATplusR} package. After the package installation we will load
a demo SWAT project and explore the functionality of the
\texttt{SWATplusR} package. The essential part of this session will be
to learn how to utilize the package functionality and combine it with
other \texttt{R} packages. In a small case study we will execute the
SWAT model with different model parametrizations, extract simulation
results, evaluate and visualize the simulation results (using the
packages \texttt{HydroGOF} and the \texttt{tidyverse}), perform a
parameter sensitivity analysis (employing packages such as
\texttt{sensitivity} or \texttt{fast}), and perform a first model
calibration.


    \hbox{\vrule height .2pt width 39.14pc}


\end{abstract}


\vskip 6.5pt

{
\hypersetup{linkcolor=black}
\setcounter{tocdepth}{2}
\tableofcontents
}

\noindent  \newpage

\section{Package installation}\label{package-installation}

\subsection{Package dependencies}\label{package-dependencies}

Below you find a list of packages that are required to install
\texttt{SWATplusR}. Among these packages you find tools that can be
useful in your daily routine when analyzing data in \texttt{R}
(e.g.~most of the packages included in the \texttt{tidyverse}). Please
install all the packages by executing the following lines of code.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{install.packages}\NormalTok{(}\KeywordTok{c}\NormalTok{(}\StringTok{"doSNOW"}\NormalTok{, }\StringTok{"foreach"}\NormalTok{, }\StringTok{"RSQLite"}\NormalTok{, }\StringTok{"tidyverse"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\subsection{SWATplusR}\label{swatplusr}

You can install the \texttt{SWATplusR} package from my \emph{github}
repository (set to public for the course). To install from repositories
with ease you can use the package \texttt{devtools}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{install.packages}\NormalTok{(}\StringTok{"devtools"}\NormalTok{)}

\CommentTok{# use the function install_github from the devtools package to install}
\NormalTok{devtools}\OperatorTok{::}\KeywordTok{install_github}\NormalTok{(}\StringTok{"chrisschuerz/SWATplusR"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\subsection{Additional packages}\label{additional-packages}

To perform our analyses we require further functionality provided by
other \texttt{R} packages. Here I provide a list of packages you have to
install. I briefly outline what each of these packages does for you.

\subsubsection{\texorpdfstring{\texttt{lhs}}{lhs}}\label{lhs}

This package provides different methods to draw Latin Hypercube Samples.
We will sample the SWAT model parameters in the calibration example
using latin hypercube sampling.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{install.packages}\NormalTok{(}\StringTok{"lhs"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\subsubsection{\texorpdfstring{\texttt{hydroGOF}}{hydroGOF}}\label{hydrogof}

This package provides a comprehensive library of objective criteria used
in hydrology (e.g.~NSE, KGE, pbias, etc.) to evaluate time series of
simulated discharge etc.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{install.packages}\NormalTok{(}\StringTok{"hydroGOF"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\subsubsection{\texorpdfstring{\texttt{sensitivity}}{sensitivity}}\label{sensitivity}

\texttt{sensitivity} provides a large variety of methods to perform
Global Sensitivity Analysis (GSA, e.g.~Sobol or Delsa).

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{install.packages}\NormalTok{(}\StringTok{"sensitivity"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\subsubsection{fast}\label{fast}

The Fourier Amplitude Sensitivity Test (FAST) is a method to perform GSA
with few model evaulations. This package impelements this method in
\texttt{R}.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{install.packages}\NormalTok{(}\StringTok{"fast"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\newpage

\section{Load required R packages}\label{load-required-r-packages}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(SWATplusR)}
\KeywordTok{library}\NormalTok{(tidyverse)}
\KeywordTok{library}\NormalTok{(lhs)}
\KeywordTok{library}\NormalTok{(fast)}
\KeywordTok{library}\NormalTok{(sensitivity)}
\KeywordTok{library}\NormalTok{(hydroGOF)}
\end{Highlighting}
\end{Shaded}

\section{Loading the SWAT demo
project}\label{loading-the-swat-demo-project}

The \texttt{SWATplusR} package provides very simple model setups of a
head watershed of the Little River Experimental Watershed (LREW). Model
setups can be retrievew for SWAT2012 and for SWAT+. The goal is to
provide the demos for all operating systems in the future. At the moment
the SWAT2012 demo is available for Windows and Linux and the SWAT+ demo
is only available for Windows. For this workshop this means that you can
work with SWAT+ if you use Windows as your operating system. Linux users
have to work with SWAT2012 at the moment. The provided functionality is
however very similar for both models.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# The path where the SWAT demo project will be written}
\NormalTok{demo_path <-}\StringTok{ "replace:/with/your/path"}
\CommentTok{# The SWAT version you want to use}
\NormalTok{swat_version <-}\StringTok{ "plus"} \CommentTok{#or "2012" on Linux}
\CommentTok{# The function writes the demo folder to the defined path and returns the final}
\CommentTok{# path of the project folder in R}
\NormalTok{proj_path <-}\StringTok{ }\KeywordTok{load_demo}\NormalTok{(}\DataTypeTok{dataset =} \StringTok{"project"}\NormalTok{, }
                       \DataTypeTok{swat_version =}\NormalTok{ swat_version, }
                       \DataTypeTok{path =}\NormalTok{ demo_path)}
\end{Highlighting}
\end{Shaded}
\newpage
\singlespacing
\end{document}
